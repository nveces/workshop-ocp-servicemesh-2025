<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 4 - RequestAuthentication :: WorkShop - Service Mesh on OCP 2025</title>
    <link rel="canonical" href="https://nveces.github.io/workshop-ocp-servicemesh-2025/workshop-ocp-servicemesh-2025/05-security/04-request-authentication.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../../_/img/RHDLogo.svg" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://nveces.github.io/workshop-ocp-servicemesh-2025">WorkShop - Service Mesh on OCP 2025</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kafka-tutorial/" target="_blank">Kafka</a>
            <a class="navbar-item" href="https://devsecops-workshop.github.io/" target="_blank">DevSecOps</a>
            <a class="navbar-item" href="https://acidonper.github.io/redhat-workshop-cicd-gitops/redhat-workshop-cicd-gitops/" target="_blank">CI/CD & GitOps</a>
            <a class="navbar-item" href="https://atarazana.github.io/gramola-gitops-guide/gramola-gitops-guide/" target="_blank">Gramola GitOps Guide</a>
            <a class="navbar-item" href="https://luisarizmendi.github.io/tutorial-secure-onboarding/" target="_blank">Secure Edge device onboarding with RHEL and FDO</a>
            <a class="navbar-item" href="https://xbryan1.github.io/rhte-2023-acm-docs/" target="_blank">Multicluster Application Deployment with Advanced Cluster Management and GitOps</a>
            <a class="navbar-item" href="https://redhat-scholars.github.io/java-inner-loop-dev-guide/java-inner-loop-dev-guide/index.html" target="_blank">Java Inner Loop Dev Guide</a>
            <a class="navbar-item" href="https://atarazana.github.io/kitchensink-guide/" target="_blank">Deploying JBoss EAP applications on OpenShift</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="workshop-ocp-servicemesh-2025" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../01-setup.html">1. Environment Setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-setup.html#prerequisite">Prerequisites</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../01-introduction/index.html">2. Introduction - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_0_warming_up">Lab 0 - Warming up</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_1_database_deployment">Lab 1 - Database deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_1_first_application_deployment">Lab 2 - First application deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_2_complete_application_deployment">Lab 3 - Complete application deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_3_adding_persistent_volumes">Lab 4 - Adding persistent volumes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_4_configuration_management">Lab 5 - Configuration management</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_5_resources">Lab 6 - Resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../01-introduction/index.html#_lab_6_liveness_and_readiness_probes">Lab 7 - Liveness and readiness probes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html">3. Envoy istio Control plane - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_1_setup">Lab 1 - Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_2_deploy_jump_app">Lab 2 - Deploy Jump App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_3_service_mesh_communication_flows">Lab 3 - Service Mesh Communication Flows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_4_istio_envoy_objects_relationship">Lab 4 - Istio-Envoy Objects Relationship</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_5_envoy_proxy">Lab 5 - Envoy Proxy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_6_istio_control_plane">Lab 6 - Istio Control Plane</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../02-envoy-istio-control-plane/index.html#_lab_7_istio_global_services">Lab 7 - Istio Global Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../03-traffic-management/index.html">4. Traffic management - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_rhossm_traffic_management_labs">Red Hat OpenShift Service Mesh: Traffic Management Labs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_1_ingress_gateways">Lab 1 - Ingress Gateways</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_2_requests_routing">Lab 2 - Requests Routing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_3_traffic_shifting_and_weight_balancing">Lab 3 - Traffic Shifting and Weight Balancing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_4_fault_injection">Lab 4 - Fault Injection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_5_requests_timeouts">Lab 5 - Requests Timeouts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_6_circuit_breaking">Lab 6 - Circuit Breaking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_7_mirroring_and_dark_launches">Lab 7 - Mirroring and Dark Launches</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../03-traffic-management/index.html#_lab_0_warming_up">Lab 0 - Warming up</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../04-troubleshooting/index.html">5. Troubleshooting - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_1_setup">Lab 1 - Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_2_deploy_jump_app">Lab 2 - Deploy Jump App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_3_service_mesh_communication_flows">Lab 3 - Service Mesh Communication Flows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_4_service_mesh_ingress_traffic_flow">Lab 4 - Service Mesh Ingress Traffic Flow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_5_service_mesh_secure_ingress_traffic_flow">Lab 5 - Service Mesh Secure Ingress Traffic Flow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_6_service_mesh_secure_egress_traffic_flow">Lab 6 - Service Mesh Secure Egress Traffic Flow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../04-troubleshooting/index.html#_lab_7_troubleshooting_tools">Lab 7 - Troubleshooting Tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">6. Security - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_0_warming_up">Lab 0 - Warming up</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_1_setup_demo_applications">Lab 1 - Setup demo applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_2_peerauthentication">Lab 2 - PeerAuthentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_3_authorization_part_1">Lab 3 - Authorization: part 1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_4_requestauthentication">Lab 4 - RequestAuthentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="index.html#_lab_5_authorization_part_2">Lab 5 - Authorization: part 2</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../06-extensibility/index.html">7. Extensibility - Labs</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../06-extensibility/index.html#_rhossm_extensibility_labs">Red Hat OpenShift Service Mesh: Extensibility Labs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../06-extensibility/index.html#_lab_1_envoy_filters">Lab 1 - Envoy Filters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../06-extensibility/index.html#_lab_2_waes">Lab 2 - WebAssembly Extensions</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">WorkShop - Service Mesh on OCP 2025</a></li>
    <li><a href="04-request-authentication.html">Lab 4 - RequestAuthentication</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/nveces/workshop-ocp-servicemesh-2025/edit/master/documentation/modules/ROOT/pages/05-security/04-request-authentication.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Lab 4 - RequestAuthentication</h1>
<div id="toc" class="toc">
<div id="toctitle">RequestAuthentication</div>
<ul class="sectlevel1">
<li><a href="#_clean_up_resources_from_previous_lab">1. Clean up resources from previous lab</a></li>
<li><a href="#_enforce_jwt_authentication">2. Enforce JWT authentication</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In this next lab, we will introduce the concept of <code>end-user-authentication</code> by configuring a <code>RequestAuthentication</code> in our service mesh.</p>
</div>
<div class="paragraph">
<p>This time,  Istio enables request-level authentication with JSON Web Token (JWT) validation.</p>
</div>
<div class="paragraph">
<p>Before starting, I truly recommend to spend some minutes reading an <a href="https://jwt.io/introduction">introduction about JWT</a>.</p>
</div>
<div class="paragraph">
<p>This fourth lab, will be very brief as the authentication part with JWT is very simple and all the value comes together with the authorization part. In lab 5, we will deeply dive into all these concepts together.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clean_up_resources_from_previous_lab"><a class="anchor" href="#_clean_up_resources_from_previous_lab"></a>1. Clean up resources from previous lab</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Firstly, we will remove all the <code>AuthorizationPolicies</code> we created in last lab. We will keep the <code>PeerAuthentication</code> as we still want to enforce <code>STRICT</code> mTLS between services calls.</p>
</div>
<div class="paragraph">
<p>Ingress policy:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/allow-ingress-productpage -n $APPS_NS1

authorizationpolicy.security.istio.io "allow-ingress-productpage" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>From <code>productpage</code> to <code>details</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/allow-details -n $APPS_NS1

authorizationpolicy.security.istio.io "allow-details" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>From <code>productpage</code> to <code>reviews</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/allow-reviews  -n $APPS_NS1

authorizationpolicy.security.istio.io "allow-reviews" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>From <code>reviews</code> to <code>ratings</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/allow-ratings  -n $APPS_NS1

authorizationpolicy.security.istio.io "allow-ratings" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>From $APPS_NS1 to <code>reviews</code> in $APPS_NS2:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/allow-reviews-from-ns1 -n $APPS_NS2

authorizationpolicy.security.istio.io "allow-reviews-from-ns1" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>Remove <code>deny-all</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc delete authorizationpolicy.security.istio.io/deny-all-in-ns -n $APPS_NS1

authorizationpolicy.security.istio.io "deny-all-in-ns" deleted</pre>
</div>
</div>
<div class="paragraph">
<p>And also, just to be back to first scenario, we will use only services from $APPS_NS1. This means, we have to configure <code>productpage</code> service accordingly:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc set env deployment/productpage-v1 -e REVIEWS_HOSTNAME=reviews -n $APPS_NS1

deployment.apps/productpage-v1 updated</pre>
</div>
</div>
<div class="paragraph">
<p>Test the application again.. everything should work without any RBAC or authentication error.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enforce_jwt_authentication"><a class="anchor" href="#_enforce_jwt_authentication"></a>2. Enforce JWT authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first step we do now is to enable JWT authentication by creating a simple <code>RequestAuthentication</code> object.
We will use  Google&#8217;s OAuth 2.0 authentication system for user login, so we will have to first discover some important configuration data from the OIDC discovery configuration url.</p>
</div>
<div class="paragraph">
<p>Google&#8217;s OIDC configuration is accesible here: <a href="https://accounts.google.com/.well-known/openid-configuration" class="bare">https://accounts.google.com/.well-known/openid-configuration</a>.</p>
</div>
<div class="paragraph">
<p>If you access to that endpoint, you will get a similar output to this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{
 "issuer": "https://accounts.google.com",
 "authorization_endpoint": "https://accounts.google.com/o/oauth2/v2/auth",
 "device_authorization_endpoint": "https://oauth2.googleapis.com/device/code",
 "token_endpoint": "https://oauth2.googleapis.com/token",
 "userinfo_endpoint": "https://openidconnect.googleapis.com/v1/userinfo",
 "revocation_endpoint": "https://oauth2.googleapis.com/revoke",
 "jwks_uri": "https://www.googleapis.com/oauth2/v3/certs",
 "response_types_supported": [
  "code",
  "token",
  "id_token",
  "code token",
  "code id_token",
  "token id_token",
  "code token id_token",
  "none"
 ],
 "subject_types_supported": [
  "public"
 ],
 "id_token_signing_alg_values_supported": [
  "RS256"
 ],
 "scopes_supported": [
  "openid",
  "email",
  "profile"
 ],
 "token_endpoint_auth_methods_supported": [
  "client_secret_post",
  "client_secret_basic"
 ],
 "claims_supported": [
  "aud",
  "email",
  "email_verified",
  "exp",
  "family_name",
  "given_name",
  "iat",
  "iss",
  "locale",
  "name",
  "picture",
  "sub"
 ],
 "code_challenge_methods_supported": [
  "plain",
  "S256"
 ],
 "grant_types_supported": [
  "authorization_code",
  "refresh_token",
  "urn:ietf:params:oauth:grant-type:device_code",
  "urn:ietf:params:oauth:grant-type:jwt-bearer"
 ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>In order to configure the <code>RequestAuthentication</code> for this lab, we will just use the following attributes from above:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>issuer: <a href="https://accounts.google.com" class="bare">https://accounts.google.com</a>. This will be the only valid issuing authority inside a token.</p>
</li>
<li>
<p>jwks_uri: <a href="https://www.googleapis.com/oauth2/v3/certs" class="bare">https://www.googleapis.com/oauth2/v3/certs</a>, which basically tells from where to obtain the <code>public key</code> to verify the signature of a token.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once we have this information, let me show you the <code>RequestAuthentication</code> YAML file we will use as template:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>apiVersion: security.istio.io/v1beta1
kind: RequestAuthentication
metadata:
  name: ${INGRESS_GW}
  namespace: istio-system
spec:
  selector:
    matchLabels:
      app: ${INGRESS_GW}
  jwtRules:
  - forwardOriginalToken: true
    issuer: ${OIDC_ISSUER_URL}
    jwksUri: ${OIDC_JWKS_URI}</pre>
</div>
</div>
<div class="paragraph">
<p>The above YAML basically means:</p>
</div>
<div class="paragraph">
<p><em>"A <code>RequestAuthentication</code> will be applied on those pods running in <code>istio-system</code> which match the label <code>app: $INGRESS_GW</code> (that is, your dedicated ingress Gateway). The JWT issuer is $OIDC_ISSUER_URL and the certs to verify the signature of the token will be obtained from $OIDC_JWKS_URI. Also, the JWT token will be forwarded to upstream service."</em></p>
</div>
<div class="paragraph">
<p>Run the following command to create the <code>RequestAuthentication</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc process -f $LABS_HOME/lab4/request-authentication.yaml -p INGRESS_GW=$INGRESS_GW OIDC_ISSUER_URL=https://accounts.google.com OIDC_JWKS_URI=https://www.googleapis.com/oauth2/v3/certs -n istio-system | oc apply -f - -n istio-system

requestauthentication.security.istio.io/dsanchor-ingress-request-authentication created</pre>
</div>
</div>
<div class="paragraph">
<p>If you test the application again it should still work, even though we have not provide any token. And that is because when requests carry no token, they are accepted by default. To reject requests without tokens, provide authorization rules that specify the restrictions for specific operations, for example paths or actions. And that&#8217;s what will do next.</p>
</div>
<div class="paragraph">
<p>Create a simple <code>AuthorizationPolicy</code> that forces the request to contain a valid <code>requestPrincipal</code> (just to avoid confusions with previous labs, it is important to mention that we used <code>principals</code> when using workload-to-workload authentication and for this next lab, we will use <code>requestPrincipals</code>. More details can be found <a href="https://istio.io/v1.6/docs/reference/config/security/authorization-policy/#Source">here</a>).</p>
</div>
<div class="paragraph">
<p>Execute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ oc process -f $LABS_HOME/lab4/simple-auth-policy.yaml -p INGRESS_GW=$INGRESS_GW -n istio-system | oc apply -f - -n istio-system

authorizationpolicy.security.istio.io/dsanchor-ingress-policy created</pre>
</div>
</div>
<div class="paragraph">
<p>If you now test the application again, you will get an <code>RBAC: access denied</code> error.</p>
</div>
<div class="paragraph">
<p>We have to provide a valid JWT token&#8230;&#8203; and the process of getting a token from the OAuth server is out of the scope of Istio. Istio will just verify incoming tokens and will extract the data from the token body, so it can later be used during the authorization phase.</p>
</div>
<div class="paragraph">
<p>In next lab, we will deploy some utilities on Openshift that will be configured to automatically manage the OAuth flow of getting a valid token against Google&#8217;s OAuth server, but now, we would like to test what we just did.</p>
</div>
<div class="paragraph">
<p>To do so, I will provide a temporal token that can be used for this test. <strong>Please ask if you haven&#8217;t be given one and export it as $JWT_TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Then, test the application using next curl:</p>
</div>
<div class="literalblock">
<div class="content">
<pre> curl -v -k -H "Authorization: Bearer $JWT_TOKEN" https://${PRODUCTPAGE_HOST}/productpage</pre>
</div>
</div>
<div class="paragraph">
<p>Did it work?  Hope so. That means, the token you have provided is valid.</p>
</div>
<div class="paragraph">
<p>If you try againg using your web browser (that is, no token is provided), it would fail.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
